# DNG to PNG Converter

A web application that converts DNG (Digital Negative) files to PNG format, implemented in TypeScript.

## Features

- ğŸ”„ Convert DNG files to PNG format
- ğŸŒ File upload through web interface
- ğŸ“± Responsive web design
- âš¡ WASM-based dcraw library
- ğŸ–¼ï¸ High-quality image processing with Sharp library

## Tech Stack

- **Backend**: Node.js + Express + TypeScript
- **Image Processing**: dcraw (WASM) + Sharp
- **File Upload**: Multer
- **Frontend**: HTML5 + Vanilla JavaScript

## Installation and Setup

### 1. Install Dependencies
```bash
npm install
```

### 2. Run Development Server
```bash
npm run dev
```

### 3. Production Build
```bash
npm run build
npm start
```

## Usage

1. Open `http://localhost:3000` in your browser
2. Select a DNG file
3. Click "Convert to PNG" button
4. Download the converted PNG file

## API Endpoints

### POST /convert
Converts DNG files to PNG format.

**Request:**
- Method: POST
- Content-Type: multipart/form-data
- Body: DNG file (dngFile field)

**Response:**
```json
{
  "message": "Conversion completed successfully.",
  "filename": "converted-file.png"
}
```

### GET /download/:filename
Downloads the converted PNG file.

## Testing

### Conversion Function Test
```bash
npm run test-conversion
```

### dcraw Library Test
```bash
npx ts-node test/test-dcraw.ts
```

### Create Test Image
```bash
npx ts-node test/create-test-image.ts
```

## Supported File Formats

- **Input**: .dng (Digital Negative) files
- **Output**: .png (Portable Network Graphics) files

## Limitations

- Maximum file size: 50MB
- Only DNG format supported (other RAW formats not supported)

## Project Structure

```
dng/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # Main server file
â”‚   â””â”€â”€ dng-converter.ts      # DNG conversion logic
â”œâ”€â”€ test/
â”‚   â”œâ”€â”€ test-conversion.ts    # Conversion test script
â”‚   â”œâ”€â”€ test-dcraw.ts         # dcraw library test
â”‚   â””â”€â”€ create-test-image.ts  # Test image creation
â”œâ”€â”€ uploads/                  # Temporary storage for uploaded files
â”œâ”€â”€ test-files/              # Test file storage
â”œâ”€â”€ dist/                    # Compiled JavaScript files
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

## Troubleshooting

### DNG File Conversion Failure
1. Verify the file is in proper DNG format
2. Check if file size is under 50MB
3. Ensure the file is not corrupted

### Server Start Failure
1. Check Node.js version (14.x or higher recommended)
2. Verify port 3000 is not in use
3. Ensure all dependencies are installed

## License

ISC

## Developer Notes

This project uses the dcraw WASM library for DNG file processing. DNG is an open RAW format developed by Adobe that standardizes RAW files generated by various cameras.